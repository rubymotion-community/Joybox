
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Joybox</title>
  <meta name="author" content="Juan José Karam">

  
  <meta name="description" content="Layers Canvas &amp; Gameplay A subclass of CCLayer Subclassing To add functionality to the game is necessary to subclass the Layer class, which is &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://Joybox.io/layers">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/Joybox/atom.xml" rel="alternate" title="Joybox" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   class="no-sidebar">
  <header role="banner"><hgroup>
  <a href="/"><img id="logo" src="/images/icnLogo.png" /></a>
  
  <a href="https://github.com/rubymotion/Joybox" ><img id="github" src="/images/icnGithub.png"></a>
  
</hgroup>

</header>
  
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/game-structure">Game Structure</a></li><p>Core Clases</p>
  <li><a href="/sprites">Sprites</a></li><p>Characters in Movement</p>
  <li><a href="/layers">Layers</a></li><p>Canvas &amp; Gameplay</p>
  <li><a href="/scenes">Scenes</a></li><p>Any Level from Easy to Hard</p>
  <li><a href="/director">Director</a></li><p>Handle the Game</p>
  <li><a href="/actions">Actions</a></li><p>Magic Tricks</p>
  <li><a href="/menus">Menus</a></li><p>Touch to Play</p>
  <li><a href="/physics">Physics</a></li><p>Apply Realism</p>
  <li><a href="/game-development">Video Games?</a></li><p id="subtitle">Game development resources</p>
</ul>

</nav>
  <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Layers</h1>
    
  </header>
  
  <h2 id="toc_0">Canvas &amp; Gameplay</h2>

<h3 id="toc_1">A subclass of CCLayer</h3>

<h2 id="toc_2">Subclassing</h2>

<p>To add functionality to the game is necessary to subclass the Layer class, which is done with the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">MyLayer</span> <span class="o">&lt;</span> <span class="ss">Joybox</span><span class="p">:</span><span class="ss">:Core</span><span class="o">::</span><span class="no">Layer</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<h2 id="toc_3">Initialization</h2>

<p>Create a new instante of a Layer:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">layer</span> <span class="o">=</span> <span class="no">MyLayer</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Add the layer to the scene</span>
</span><span class='line'><span class="n">scene</span> <span class="o">&lt;&lt;</span> <span class="n">layer</span>
</span></code></pre></td></tr></table></div></figure>

<h2 id="toc_4">Set Up &amp; Tear Down</h2>

<p>The set up and tear down of any of the objects related to the Layer (like the Sprites), must be done in the on_enter and on_exit methods:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">on_enter</span>
</span><span class='line'>  <span class="c1"># Initialize objects like Sprites</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">on_exit</span>
</span><span class='line'>  <span class="c1"># Perform any state clean if needed</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<h2 id="toc_5">Handle User Touches</h2>

<p>Handle any state of the user interaction on the screen:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">on_touches_began</span> <span class="k">do</span> <span class="o">|</span><span class="n">touches</span><span class="p">,</span> <span class="n">event</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">on_touches_moved</span> <span class="k">do</span> <span class="o">|</span><span class="n">touches</span><span class="p">,</span> <span class="n">event</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">on_touches_ended</span> <span class="k">do</span> <span class="o">|</span><span class="n">touches</span><span class="p">,</span> <span class="n">event</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">on_touches_cancelled</span> <span class="k">do</span> <span class="o">|</span><span class="n">touches</span><span class="p">,</span> <span class="n">event</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<h1 id="toc_6">Subscribe to the Game Loop calls</h1>

<p>There are two ways to receive the method calls of the game loop: the first using a block:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">schedule_update</span> <span class="k">do</span> <span class="o">|</span><span class="n">dt</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>The other one is declaring a method for that purpuse:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Invoke the following method on the on_enter method</span>
</span><span class='line'><span class="n">schedule_update</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<h1 id="toc_7">Sceneless Layer</h1>

<p>When you only have one layer and you don&#39;t want to create the complete Scene object to present it, you add the following to your Layer class:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">MyLayer</span> <span class="o">&lt;</span> <span class="ss">Joybox</span><span class="p">:</span><span class="ss">:Core</span><span class="o">::</span><span class="no">Layer</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">scene</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>This will auto generate a scene object with the layer already set up inside it, finally the way to present is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">director</span><span class="o">.</span><span class="n">push_scene</span><span class="p">(</span><span class="no">MyLayer</span><span class="o">.</span><span class="n">scene</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>For more information, see: <a href="http://www.cocos2d-iphone.org/api-ref/2.1.0/interface_c_c_layer.html">CCLayer Class Reference</a></p>

  
</article>

</div>

  </div>
  <footer role="contentinfo"><div id="developers">
  <!--<h4>Maintained by: </h4> <br/>-->
    <span id="quote">Empower yourself and realise the importance of contributing to the world by living your talent. Work on what you love. You are responsible for the talent that has been entrusted to you. - Catharina Bruns</span>
  <a href="https://github.com/CurveBeryl">
  <img src="/images/icnJuanKaram.png" /><br />
  <span id="name">Juan José Karam<span/><br />
  </a>
  <span id="twitter">@juankaram</span>

</div>
</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
